[package]
name = "cargo-insert-docs"
version = "0.19.0"
edition = "2024"
license = "MIT OR Apache-2.0"
description = "Insert feature docs into your crate docs, and crate docs into your README."
categories = ["development-tools::cargo-plugins", "command-line-utilities"]
keywords = ["documentation", "cargo", "crate", "readme"]
documentation = "https://docs.rs/cargo-insert-docs"
repository = "https://github.com/bluurryy/cargo-insert-docs"
readme = "README.md"
exclude = [".github"]

[dependencies]
anstream = "0.6.20"
anstyle = "1.0.11"
arcstr = { version = "1.2.0", default-features = false }
cargo_metadata = "0.22.0"
clap = { version = "4.5.47", features = ["derive", "wrap_help"] }
clap-cargo = "0.17.1"
color-eyre = { version = "0.6.5", features = ["capture-spantrace"] }
gix = { version = "0.73.0", default-features = false, features = ["status"] }
indexmap = { version = "2.11.0", default-features = false, features = ["std"] }
macro_rules_attribute = "0.2.2"
mimalloc = "0.1.48"
percent-encoding = "2.3.2"
proc-macro2 = { version = "1.0.101", default-features = false, features = [
    "span-locations",
] }
rangemap = "1.6.0"
relative-path = { version = "2.0.1", default-features = false, features = [
    "std",
    "alloc",
] }
rustdoc-types = "0.56.0"
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.143"
syn = { version = "2.0.106", default-features = false, features = [
    "clone-impls",
    "extra-traits",
    "full",
    "parsing",
    "printing",
] }
toml = "0.9.5"
toml_edit = "0.23.4"
tracing = "0.1.41"
tracing-error = "0.2.1"
tracing-subscriber = { version = "0.3.20", features = ["env-filter"] }
unicode-id = "0.3.5"

[dev-dependencies]
expect-test = "1.5.1"
indoc = "2"
unindent = "0.2.4"

[package.metadata.release]
allow-branch = ["main"]
pre-release-hook = ["just", "pre-release"]
pre-release-commit-message = "release: version {{version}}"
pre-release-replacements = [
    { file = "CHANGELOG.md", search = '## \[Unreleased\]', replace = "## [{{version}}] - {{date}}", exactly = 1 },
    { file = "CHANGELOG.md", search = '\[Unreleased\]: .*', replace = "[{{version}}]: https://github.com/bluurryy/cargo-insert-docs/releases/tag/v{{version}}", exactly = 1 },
    { file = "CHANGELOG.md", search = '#Unreleased', replace = "#{{version}}", min = 0 },
    { file = "CHANGELOG.md", search = '<!-- next-header -->', replace = "<!-- next-header -->\n## [Unreleased]\n", exactly = 1 },
    { file = "CHANGELOG.md", search = '<!-- next-url -->', replace = "<!-- next-url -->\n[Unreleased]: https://github.com/bluurryy/cargo-insert-docs/compare/{{tag_name}}...HEAD", exactly = 1 },
]

[workspace]
members = ["tests/*", "xtask"]
exclude = ["tests/test-config"]

[workspace.metadata.release]
consolidate-commits = false
